
      <div class="content">
        <h2 class="mb-2 lh-sm"><?php echo $page_name; ?></h2>

         
        <div class="row mb-3 gy-6"> 
           <div class="col-12 col-xxl-2">
            <div class="row align-items-center g-3 g-xxl-0 h-100 align-content-between">
              
              <div class=" col-12 col-sm-6 col-md-3 col-lg-6 col-xl-3 col-xxl-12">
                <div class="d-flex align-items-center"><span class="fs-4 lh-1 uil uil-university text-success-500"></span>
                  <div class="ms-2">
                    <div class="d-flex align-items-end">
                      <h3 class="text-900  mb-0" id="totalcustomer"></h3>
                      
                    </div>
                      <p class="text-800  mb-0">Total Customer </p>
                      
                       <!-- <h3 class="text-900 mb-0"><span class="fs-1 fw-semi-bold text-900">Total Bank Lead </span></h3> -->

                       <!-- <h2 class="mb-0 me-2"><span class="fs-1 fw-semi-bold text-1100" id="totalleadorg"></span></h2> -->
                  </div>
                </div>
              </div>
            
              <div class=" col-12 col-sm-6 col-md-3 col-lg-6 col-xl-3 col-xxl-12 ">
                <div class="d-flex align-items-center"><span class="fs-4 lh-1 uil uil-university text-primary-500"></span>
                  <div class="ms-2">
                    <div class="d-flex align-items-end">
                      <h3 class="text-900  mb-0" id="activecustomer"></h3>
                      
                    </div> 
                      <!-- <h3 class="text-900 mb-0"><span class="fs-1 fw-semi-bold text-900">Today's Bank Lead </span></h3> -->
                      <p class="text-800  mb-0">Active Customer</p>
                      <!-- <p class="mb-0 fs--1">Total Active Count <span class="fw-bold" id="status_count_emp">00</span></p> -->

                     <!-- <h2 class="mb-0 me-2"><span class="fs-1 fw-semi-bold text-1100" id="totaltodayleadorg"></span></h2> -->
                  </div>
                </div>
              </div>
                



              <div class=" col-12 col-sm-12 col-md-3 col-lg-6 col-xl-3 col-xxl-12 ">
                <div class="d-flex align-items-center"><span class="fs-4 lh-1 uil uil-user text-warning-500"></span>
                  <div class="ms-2">
                    <div class="d-flex align-items-end">
                       <h3 class="text-900  mb-0" id="failedcustomer"></h3>
                     
                    </div>
                     <!-- <h3 class="text-900 mb-0"><span class="fs-1 fw-semi-bold text-900">Your Total Lead </span></h3> -->
                      <p class="text-800  mb-0">Failed Customer</p>
                      <!-- <p class="mb-0 fs--1">Total Failed Count <span class="fw-bold" id="status_count_emp">00</span></p> -->

                       <!-- <h2 class="mb-0 me-2"><span class="fs-1 fw-semi-bold text-1100"id="yourtotalleads"></span></h2> -->
                  </div>
                </div>
              </div>

              <div class=" col-12 col-sm-12 col-md-3 col-lg-6 col-xl-3 col-xxl-12 ">
                <div class="d-flex align-items-center"><span class="fs-4 lh-1 uil uil-user text-warning-500"></span>
                  <div class="ms-2">
                    <div class="d-flex align-items-end">
                       <h3 class="text-900  mb-0" id="userAbortedcustomer"></h3>
                     
                    </div>
                     <!-- <h3 class="text-900 mb-0"><span class="fs-1 fw-semi-bold text-900">Your Total Lead </span></h3> -->
                      <p class="text-800  mb-0">User Aborted Customer</p>
                      <!-- <p class="mb-0 fs--1">Total Failed Count <span class="fw-bold" id="status_count_emp">00</span></p> -->

                       <!-- <h2 class="mb-0 me-2"><span class="fs-1 fw-semi-bold text-1100"id="yourtotalleads"></span></h2> -->
                  </div>
                </div>
              </div>


              <div class=" col-12 col-sm-12 col-md-3 col-lg-6 col-xl-3 col-xxl-12 ">
                <div class="d-flex align-items-center"><span class="fs-4 lh-1 uil uil-user text-warning-500"></span>
                  <div class="ms-2">
                    <div class="d-flex align-items-end">
                       <h3 class="text-900  mb-0" id="closedcustomer"></h3>
                       <!-- <h3 class="text-900  mb-0">0</h3> -->
                    </div>
                     <!-- <h3 class="text-900 mb-0"><span class="fs-1 fw-semi-bold text-900">Your Total Lead </span></h3> -->
                      <p class="text-800  mb-0">Closed Customer</p>
                      <!-- <p class="mb-0 fs--1">Total Failed Count <span class="fw-bold" id="status_count_emp">00</span></p> -->

                       <!-- <h2 class="mb-0 me-2"><span class="fs-1 fw-semi-bold text-1100"id="yourtotalleads"></span></h2> -->
                  </div>
                </div>
              </div>

            </div>
          </div>
         </div>


           <!-- <div class="row mb-3 gy-6 mt-2"> 
           <div class="col-12 col-xxl-2">
            <div class="row align-items-center g-3 g-xxl-0 h-100 align-content-between">
              <div class="col-12 col-sm-6 col-md-3 col-lg-6 col-xl-3 col-xxl-12">
                <div class="d-flex align-items-center"><span class="fs-4 lh-1 uil uil-users-alt text-success-500"></span>
                  <div class="ms-2">
                    <div class="d-flex align-items-end">
                      <h3 class="mb-0 me-2"><span class="fs-1 fw-semi-bold text-900" id="topEmployee">Projects</span></h3>
                    </div>
                    <p class="text-800  mb-0">Top Employee Leads</p>
                  </div>
                </div>
              </div>
              <div class="col-12 col-sm-6 col-md-3 col-lg-6 col-xl-3 col-xxl-12">
                <div class="d-flex align-items-center"><span class="fs-4 lh-1 uil uil-books text-primary-500"></span>
                  <div class="ms-2">
                    <div class="d-flex align-items-end">
                      <h3 class="mb-0 me-2"><span class="fs-1 fw-semi-bold text-900" id="topbranch">Members</span></h3>
                    </div> 
                    <p class="text-800  mb-0">Top Branch Leads</p>
                  </div>
                </div>
              </div>
              <div class="col-12 col-sm-12 col-md-3 col-lg-6 col-xl-3 col-xxl-12">
                <div class="d-flex align-items-center"><span class="fs-4 lh-1 uil uil-invoice text-warning-500"></span>
                  <div class="ms-2">
                    <div class="d-flex align-items-end">
                      <h3 class="mb-0 me-2"><span class="fs-1 fw-semi-bold text-900"id="topproduct">Top Product</span></h3>
                    </div>
                    <p class="text-800  mb-0">Top Product Leads</p>
                  </div>
                </div>
              </div>
              <div class="col-12 col-sm-6 col-md-3 col-lg-6 col-xl-3 col-xxl-12">
                <div class="d-flex align-items-center"><span class="fs-4 lh-1 uil uil-refresh text-danger-500"></span>
                  <div class="ms-2">
                    <div class="d-flex align-items-end">
                      <h3 class="mb-0 me-2"><span class="fs-1 fw-semi-bold text-900"id="topsource"></span></h3>
                    </div>
                    <p class="text-800  mb-0">Top Source Leads</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
         </div> -->


        <!-- </div> -->
<!--            
             <div class="mx-n4 px-4 mx-lg-n6 px-lg-6 bg-white pt-7 pb-3 border-y border-300">
          <div class="row">
            <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6 col-xxl-12">
              <div class="row g-3 mb-3">
                <div class="col-12 col-md-6">
                  <h3 class="text-1100 text-nowrap">Amount By Lead Status</h3>
                  <!-- <p class="text-700 mb-md-7">Newly found and yet to be solved</p>  -->
                  <!-- <div class="d-flex align-items-center justify-content-between">
                    <p class="mb-0 fw-bold">Status name </p>
                    <p class="mb-0 fs--1">Total Amount : <span class="fw-bold" id="status_count_emp_amount">00</span></p>
                  </div>
                  <hr class="bg-200 mb-2 mt-2" />
                
                  <div id="statusWiseEnquiryContaineramount">

                  </div>
                 
                </div>
                <div class="col-12 col-md-6">
                  <div class="position-relative mb-sm-4 mb-xl-0">
                    <div class="echart-issue-chart-status_amount" style="min-height:390px;width:100%"></div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6 col-xxl-12">
              <div class="row g-3 mb-3">
                <div class="col-12 col-md-6">
                  <h3 class="text-1100 text-nowrap">Amount By Lead Product</h3>
                  <!-- <p class="text-700 mb-md-7">Newly found and yet to be solved</p> -->
                 <!--  <div class="d-flex align-items-center justify-content-between">
                    <p class="mb-0 fw-bold">Product name </p>
                    <p class="mb-0 fs--1">Total Product Amount : <span class="fw-bold" id="product_count_amount">00</span></p>
                  </div>
                  <hr class="bg-200 mb-2 mt-2" />
                 
                  <div id="productWiseEnquiryContaineramount">
                  </div>
                 
                </div>
                <div class="col-12 col-md-6">
                  <div class="position-relative mb-sm-4 mb-xl-0">
                    <div class="echart-issue-chart-product_amount" style="min-height:390px;width:100%"></div>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>
           
             <div class="mx-n4 px-4 mx-lg-n6 px-lg-6 bg-white pt-7 pb-3 border-y border-300">
          <div class="row">
            <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6 col-xxl-12">
              <div class="row g-3 mb-3">
                <div class="col-12 col-md-6">
                  <h3 class="text-1100 text-nowrap">Lead By Status</h3>
                  <!-- <p class="text-700 mb-md-7">Newly found and yet to be solved</p> -->
                 <!-- <div class="d-flex align-items-center justify-content-between">
                    <p class="mb-0 fw-bold">Status name </p>
                    <p class="mb-0 fs--1">Total status lead <span class="fw-bold" id="status_count">00</span></p>
                  </div>
                  <hr class="bg-200 mb-2 mt-2" />
                
                  <div id="statusWiseEnquiryContainer">

                  </div>
                 
                </div>
                <div class="col-12 col-md-6">
                  <div class="position-relative mb-sm-4 mb-xl-0">
                    <div class="echart-issue-chart-status" style="min-height:390px;width:100%"></div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6 col-xxl-12">
              <div class="row g-3 mb-3">
                <div class="col-12 col-md-6">
                  <h3 class="text-1100 text-nowrap">Lead By Product</h3>
                  <!-- <p class="text-700 mb-md-7">Newly found and yet to be solved</p> -->
                 <!-- <div class="d-flex align-items-center justify-content-between">
                    <p class="mb-0 fw-bold">Product name </p>
                    <p class="mb-0 fs--1">Total Product Count : <span class="fw-bold" id="product_count">00</span></p>
                  </div>
                  <hr class="bg-200 mb-2 mt-2" />
                 
                  <div id="productWiseEnquiryContainer">
                  </div>
                 
                </div>
                <div class="col-12 col-md-6">
                  <div class="position-relative mb-sm-4 mb-xl-0">
                    <div class="echart-issue-chart-product" style="min-height:390px;width:100%"></div>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>
        <!-- --------------------------------------------------------------------------- -->
         <!-- <h1>persmission user</h1> -->
       <!-- <div class="mx-n4 px-4 mx-lg-n6 px-lg-6 bg-white pt-7 pb-3 border-y border-300">
          <div class="row">
            <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6 col-xxl-12">
              <div class="row g-3 mb-3">
                <div class="col-12 col-md-6">
                  <h3 class="text-1100 text-nowrap">Your Status Leads</h3>
                  <!-- <p class="text-700 mb-md-7">Newly found and yet to be solved</p> -->
                <!--  <div class="d-flex align-items-center justify-content-between">
                    <p class="mb-0 fw-bold">Status name </p>
                    <p class="mb-0 fs--1">Total Status Count <span class="fw-bold" id="status_count_emp">00</span></p>
                  </div>
                  <hr class="bg-200 mb-2 mt-2" />
                
                  <div id="statusempWiseEnquiryContainer">

                  </div>
                 
                </div>
                <div class="col-12 col-md-6">
                  <div class="position-relative mb-sm-4 mb-xl-0">
                    <div class="echart-issue-chart-statusemp" style="min-height:390px;width:100%"></div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6 col-xxl-12">
              <div class="row g-3 mb-3">
                <div class="col-12 col-md-6">
                  <h3 class="text-1100 text-nowrap">Your Product Leads</h3>
                  <!-- <p class="text-700 mb-md-7">Newly found and yet to be solved</p> -->
                <!--  <div class="d-flex align-items-center justify-content-between">
                    <p class="mb-0 fw-bold">Product name </p>
                    <p class="mb-0 fs--1">Total Product Count : <span class="fw-bold" id="productemp_count">00</span></p>
                  </div>
                  <hr class="bg-200 mb-2 mt-2" />
                 
                  <div id="productempWiseempEnquiryContainer">
                  </div>
                 
                </div>
                <div class="col-12 col-md-6">
                  <div class="position-relative mb-sm-4 mb-xl-0">
                    <div class="echart-issue-chart-productemp" style="min-height:390px;width:100%"></div>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>
            <div class="mx-n4 px-4 mx-lg-n6 px-lg-6 bg-white pt-7 pb-3 border-y border-300">
          <div class="row">
            <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6 col-xxl-12">
              <div class="row g-3 mb-3">
                <div class="col-12 col-md-6">
                  <h3 class="text-1100 text-nowrap">Your Source Leads</h3>
                  <!-- <p class="text-700 mb-md-7">Newly found and yet to be solved</p> -->
                 <!-- <div class="d-flex align-items-center justify-content-between">
                    <p class="mb-0 fw-bold">Source name </p>
                    <p class="mb-0 fs--1">Total Source Count <span class="fw-bold" id="yoursourcenameone">00</span></p>
                  </div>
                  <hr class="bg-200 mb-2 mt-2" />
                
                  <div id="yoursourcename">

                  </div>
                 
                </div>
                <div class="col-12 col-md-6">
                  <div class="position-relative mb-sm-4 mb-xl-0">
                    <div class="echart-issue-chart-sourceemp" style="min-height:390px;width:100%"></div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6 col-xxl-12">
              <div class="row g-3 mb-3">
                <div class="col-12 col-md-6">
                  <h3 class="text-1100 text-nowrap">Your priority leads</h3>
                  <!-- <p class="text-700 mb-md-7">Newly found and yet to be solved</p> -->
                 <!-- <div class="d-flex align-items-center justify-content-between">
                    <p class="mb-0 fw-bold">Priority name </p>
                    <p class="mb-0 fs--1">Total Priority Count : <span class="fw-bold" id="yourpriorityleadsone">00</span></p>
                  </div>
                  <hr class="bg-200 mb-2 mt-2" />
                 
                  <div id="yourpriorityleads">
                  </div>
                 
                </div>
                <div class="col-12 col-md-6">
                  <div class="position-relative mb-sm-4 mb-xl-0">
                    <div class="echart-issue-chart-priorityempemp" style="min-height:390px;width:100%"></div>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>
        
        <div class="mx-n4 px-4 mx-lg-n6 px-lg-6 bg-white pt-7 pb-3 border-y border-300">
          <div class="row">
            
            <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6 col-xxl-12">
              <div class="row g-3 mb-3">
                <div class="col-12 col-md-6">
                  <h3 class="text-1100 text-nowrap">Lead By Priority</h3>
                  <!-- <p class="text-700 mb-md-7">Newly found and yet to be solved</p> -->
                 <!-- <div class="d-flex align-items-center justify-content-between">
                    <p class="mb-0 fw-bold">Priority name </p>
                    <p class="mb-0 fs--1">Total priority count <span class="fw-bold"id="priority_count">00</span></p>
                  </div>
                  <hr class="bg-200 mb-2 mt-2" />
                 
                      <div id="priorityWiseEnquiryContainer"></div>
                  </div>
                  <!-- <button class="btn btn-outline-primary mt-5">See Details<span class="fas fa-angle-right ms-2 fs--2 text-center"></span></button> -->
                  <!-- <div class="col-12 col-md-6">
                  <div class="position-relative mb-sm-4 mb-xl-0">
                    <div class="echart-issue-chart-priority" style="min-height:390px;width:100%"></div>
                  </div>
                </div>
                </div>
               
            </div>
            
            <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6 col-xxl-12">
              <div class="row g-3 mb-3">
                <div class="col-12 col-md-6">
                  <h3 class="text-1100 text-nowrap">Lead By Source</h3>
                  <!-- <p class="text-700 mb-md-7">Newly found and yet to be solved</p> -->
                  <!--<div class="d-flex align-items-center justify-content-between">
                    <p class="mb-0 fw-bold">Source name </p>
                    <p class="mb-0 fs--1">Total Source Count : <span class="fw-bold" id="source_count">00</span></p>
                  </div>
                  <hr class="bg-200 mb-2 mt-2" />
                
                  <div id="sourceWiseEnquiryContainer">
                  </div>
                 
                </div>
                <div class="col-12 col-md-6">
                  <div class="position-relative mb-sm-4 mb-xl-0">
                    <div class="echart-issue-chart-source" style="min-height:390px;width:100%"></div>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div> -->

<div class="row g-2 mt-2">
    <div class="col-sm-12 col-md-6 col-lg-12">
            <div class="card ">
              <!-- <div class="card-header text-black">Employee Wise </div> -->
              <div class="card-body"  id="dealForecastTableStaff">
                <h4 class="card-title text-black">SCHEDULE-WISE DATA </h4>
                                   
                <div class="row col-12">
                        <!-- <div class="col-6">
                                        <h3 class="m-3">Report Data</h3>
                                    </div> -->
                                    <input type="hidden" name="id">
                                    <input type="hidden" name="mts_id">
                                    <input type="hidden" name="mandate_customer_id">

                                    <div class="col-3  mb-3">

                                      <label class="form-label">Start Date</label>
                                      <input type="date" class="form-control" id="startDate" name="startDate"/>
                                    </div>

                                    <div class="col-3  mb-3">
                                     <label class="form-label">To Date</label>

                                     <input type="date" class="form-control" id="endDate" name="endDate"/>

                                    </div>
                                    
                                    <div class="col-3 mb-3">
                                      <label class="form-label" for="mts_status_message"> Status</label>
                                        <select class="form-select" id="mts_status_message" name="mts_status_message">
                                            <option value="" selected="">Select Status Type</option>
                                            <option value="I">Initiated</option>
                                            <option value="S">Success</option>
                                            <option value="f">Failure</option>
                                            <option value="1">Skipped</option>
                                            <option value="NOT_SCHEDULED">Not Scheduled</option>


                                        </select>
                                    </div>
                                    <!-- <div class="col-3  mb-0 mt-4  ">
                                    <a class="btn btn-primary btn-md ms-auto filter-data-btn">
                                    Filter Data
                                </a>
                                        
                                     
                                    </div> -->


                                    <div class="col-3 mb-3 mt-4">
                                    
                                         <button class="btn btn-primary btn-sm" onclick="exportToExcelx()">
                                            <i class="fas fa-file-excel"></i> Export to Excel
                                        </button> 
                                       
                                     
                                    </div>
                                    
                        </div>
                <div class="table-responsive scrollbar">

                  <!-- <table class="table fs--1 mb-0 border border-300"> -->
                  <table class="table table-striped table-sm fs--1 mb-0" id="dataTable">
                    <thead>
                      <tr>
                       <th class=" sort border-top ps-3"  data-sort="contact" >Sr no</th>
                        <th class=" sort border-top ps-3"  data-sort="contact" >Name</th>
                        <th class=" sort border-top ps-3"  data-sort="contact" >Phone</th>
                        <th class=" sort border-top ps-3"  data-sort="contact" >Loan Bank Account No.</th>
                        <th class=" sort border-top ps-3"  data-sort="contact" >Amount</th>
                        <th class=" sort border-top ps-3"  data-sort="contact" >Debit Date</th>
                        <th class=" sort border-top ps-3"  data-sort="contact" >Branch</th>
                        <th class=" sort border-top ps-3"  data-sort="contact" >Loan Type</th>
                        <th class=" sort border-top ps-3"  data-sort="contact" >Added By</th>
                        <th class=" sort border-top ps-3"  data-sort="contact" >Status</th>





                      </tr>

                    </thead>
                    <tbody class="list " id="EmployeeWiselead">
                    </tbody>
                  </table>
                </div>
               
                   <span>Total customer is: <span id="totalempwise"></span>
        <div class="d-flex justify-content-center mt-3">
          <div id="paginationemp"></div>
        </div>
              </div>
            </div>
          </div>
          <div class="table-responsive">
                              
                        
                      
                              <table class="table table-striped table-sm fs--1 mb-0 d-none" id="reporttableexcel">
                                                <thead>
                                                <tr> 
                                                <th class=" sort border-top ps-3"  data-sort="contact" >Sr no</th>
                        <th class=" sort border-top ps-3"  data-sort="contact" >Name</th>
                        <th class=" sort border-top ps-3"  data-sort="contact" >Phone</th>
                        <th class=" sort border-top ps-3"  data-sort="contact" >Loan Bank Account No.</th>
                        <th class=" sort border-top ps-3"  data-sort="contact" >Amount</th>
                        <th class=" sort border-top ps-3"  data-sort="contact" >Debit Date</th>
                        <th class=" sort border-top ps-3"  data-sort="contact" >Branch</th>
                        <th class=" sort border-top ps-3"  data-sort="contact" >Loan Type</th>
                        <th class=" sort border-top ps-3"  data-sort="contact" >Added By</th>
                        <th class=" sort border-top ps-3"  data-sort="contact" >Status</th>

                             
                              
                              <?php if(in_array('viewUser', $user_permission) || in_array('updateUser', $user_permission) 
                                        || in_array('deleteUser', $user_permission)): ?>
                              
                                <th class="sort text-end align-middle pe-0 border-top" scope="col">Action</th>
                              
                               <?php endif; ?>
                              
                              </tr>
                            
                                                <tbody class="list" id="showReportResultexcel">
                                        
                                                
                                                </tbody>
                                              </table>
                                            </div>


           <!-- <div class="col-sm-12 col-md-6 col-lg-6">
            <div class="card text-white">
              <!-- <div class="card-header text-black">Employee Wise </div> -->
              <!-- <div class="card-body"  id="dealForecastTableBranch">
                <h4 class="card-title text-black">Branch Wise </h4>
                <div class="table-responsive scrollbar">

                   <table class="table fs--1 mb-0 border border-300">
                  <thead>
                    <tr>
                      <th class=" border-end white-space-nowrap text-center text-uppercase text-700" scope="col" data-sort="contact" style="width:15%; min-width:100px">Sr no</th>
                     <th class=" border-end white-space-nowrap text-center text-uppercase text-700" scope="col" data-sort="contact" style="width:15%; min-width:100px">Branch Name</th>
                      <th class="border-end align-middle text-center  px-3 text-uppercase text-700" scope="col" colspan="2"  style="width:15%; min-width:95px">Total</th>
                      <!-- <th class="border-end align-middle text-end px-3 text-uppercase text-700" scope="col" style="width:15%; min-width:95px">Amount</th> -->
                    <!--   <th class="border-end align-middle text-center  px-3 text-uppercase text-700" scope="col" colspan="2" style="width:20%; min-width:100px">Todays</th>
                    </tr>
                    <tr>
                     <th class="sort border-end white-space-nowrap align-middle ps-0 text-uppercase text-700" scope="col"  style="width:15%; min-width:100px"></th> 
                     <th class="sort border-end white-space-nowrap align-middle ps-0 text-uppercase text-700" scope="col"  style="width:15%; min-width:100px"></th> 
                      <th class="border-end align-middle text-end px-3 text-uppercase text-700" scope="col" style="width:15%; min-width:95px">Lead</th> 
                      <th class="border-end align-middle text-end px-3 text-uppercase text-700" scope="col" style="width:15%; min-width:95px">Amount</th> 
                       
                        <th class="border-end align-middle text-end px-3 text-uppercase text-700" scope="col" style="width:15%; min-width:95px">Lead</th> 
                      <th class="border-end align-middle text-end px-3 text-uppercase text-700" scope="col" style="width:15%; min-width:95px">Amount</th> 
                     
                    </tr>
                  </thead>
                  <tbody class="list" id="showBranchWiselead">
                  
                  </tbody>
                
                </table>
                </div>
                 <span class="text-black">Total branch is: <span id="totalbranchemp"></span></span>
         

                  <div class="d-flex justify-content-center mt-3">
                  <!-- <button class="page-link disabled" data-list-pagination="prev"><span class="fas fa-chevron-left"></span></button>
                  <ul class="mb-0 pagination"></ul>
                  <button class="page-link pe-0 disabled" data-list-pagination="next"><span class="fas fa-chevron-right"></span></button> -->
                  <!--   <div class="d-flex justify-content-center mt-3">
                  

                      <div id="paginationbranch"></div>

                </div>
              </div>
            </div>

            </div>
          </div> -->

             
    </div>

  

    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.4/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>   
 
 
    <script>
   

   showTotalCustomer() 
   showLeadByStatusEmpp()
   showFailure()
   showUserAborted() 
   showClosed()
   showEmployeeWiseleads(1)

  

    function showTotalCustomer() {
    $.ajax({
        type: 'GET',
        url: "<?php echo base_url() ?>api/Dashboard/TotalCustomer",
        async: false,
        method: 'get',
        dataType: 'json',
        beforeSend: function (xhr) {
            xhr.setRequestHeader('X-API-KEY', 'enachSyncWorks');
        },
        success: function (response) {
            var data = response.total_mandate_customers_count;
            $('#totalcustomer').html(data);
        },
        error: function (response) {
          console.log("vikas error ");
        }
    });
}



/// to show success
function showLeadByStatusEmpp() {
    $.ajax({
        type: 'GET',
        url: "<?php echo base_url() ?>api/Dashboard/LeadByStatusEmpp",
        async: false,
        dataType: 'json',
        beforeSend: function (xhr) {
            xhr.setRequestHeader('X-API-KEY', 'enachSyncWorks');
        },
        success: function (response) {
            var data = response.data;
            var html = "";
            var total = 0;
            if (data.length === 0) {
                total = 0; // Set total count to 0 if no data
            } else {

            for (var i = 0; i < data.length; i++) {
                total += parseInt(data[i].total_count);

                html += '<div class="d-flex align-items-center mb-1">';
                html += '<p class="mb-0 fw-semi-bold text-900 lh-sm flex-1">' + data[i].mandate_status_message + '</p>' +
                    '<h5 class="mb-0 text-900">' + data[i].total_count + '</h5>';
                html += '</div>';
            }
          }
            $('#statusempWiseEnquiryContainer').html(html);
            $('#activecustomer').text(total);
        },
        error: function (xhr, textStatus, errorThrown) {
            console.log("Error: " + textStatus + " " + errorThrown);
        }
    });
}

///to show user aborted 


function showFailure() {
    $.ajax({
        type: 'GET',
        url: "<?php echo base_url() ?>api/Dashboard/showfailure",
        async: false,
        dataType: 'json',
        beforeSend: function (xhr) {
            xhr.setRequestHeader('X-API-KEY', 'enachSyncWorks');
        },
        success: function (response) {
            var data = response.data;
            var html = "";
            var total = 0;
            if (data.length === 0) {
                total = 0; // Set total count to 0 if no data
            } else{
            for (var i = 0; i < data.length; i++) {
                total += parseInt(data[i].total_count);

                html += '<div class="d-flex align-items-center mb-1">';
                html += '<p class="mb-0 fw-semi-bold text-900 lh-sm flex-1">' + data[i].mandate_status_message + '</p>' +
                    '<h5 class="mb-0 text-900">' + data[i].total_count + '</h5>';
                html += '</div>';
            }
          }
            $('#statusempWiseEnquiryContainer').html(html);
            $('#failedcustomer').text(total); // Set the total count to the element with ID 'failedcustomer'
        },
        error: function (xhr, textStatus, errorThrown) {
            console.log("Error: " + textStatus + " " + errorThrown);
        }
    });
}


function showUserAborted() {
    $.ajax({
        type: 'GET',
        url: "<?php echo base_url() ?>api/Dashboard/showUserAborted",
        async: false,
        dataType: 'json',
        beforeSend: function (xhr) {
            xhr.setRequestHeader('X-API-KEY', 'enachSyncWorks');
        },
        success: function (response) {
            var data = response.data;
            var total = 0;
            if (data.length === 0) {
                total = 0; // Set total count to 0 if no data
            } else{
            for (var i = 0; i < data.length; i++) {
                total += parseInt(data[i].total_count);


            }
          }
            $('#userAbortedcustomer').text(total); // Set the total count to the element with ID 'userAbortedcustomer'
        },
        error: function (xhr, textStatus, errorThrown) {
            console.log("Error: " + textStatus + " " + errorThrown);
        }
    });
}
           
///to show closed status

function showClosed() {
    $.ajax({
        type: 'GET',
        url: "<?php echo base_url() ?>api/Dashboard/showclosed",
        async: false,
        dataType: 'json',
        beforeSend: function (xhr) {
            xhr.setRequestHeader('X-API-KEY', 'enachSyncWorks');
        },
        success: function (response) {
            
            var total = response.total_count || 0; // Use the correct property name
            

            $('#closedcustomer').text(total); // Set the total count to the element with ID 'closedcustomer'
        },
        error: function (xhr, textStatus, errorThrown) {
            console.log("Error: " + textStatus + " " + errorThrown);
        }
    });
}


$('#startDate').on('change', function () {
 
        showEmployeeWiseleads(1);
   
  });

// Attach change event to the end date field
$('#endDate').on('change', function () {
  showEmployeeWiseleads(1);

});

$('#mts_status_message').on('change', function () {
  showEmployeeWiseleads(1);
});
///For the schedule 


function showEmployeeWiseleads(page) {

  var mts_status_message = $('select[name=mts_status_message]').val();
  
    var startDate = $('#startDate').val();
    var endDate = $('#endDate').val();
    var mts_id = $('#mts_id').val();


   
    $.ajax({
        type: 'ajax',
        url: "<?php echo base_url() ?>api/Dashboard/showMandateList/" + page,
        data:{
          mts_status_message:mts_status_message,
          mts_id:mts_id,

          // mts_is_skipped:mts_is_skipped,
          startDate:startDate,
          endDate:endDate},
        // async: false,
        method: 'get',
        dataType: 'json',
        beforeSend: function (xhr) {
            xhr.setRequestHeader('X-API-KEY', 'enachSyncWorks');
        },
        success: function (response) {
          // transaction_details=response.transaction_details;

            console.log(response);
           var serialNumber = (page - 1) * 10 + 1;
            
            var html = "";
            var data = response.data;
            console.log("Filtered Data:", data);
            // var data = data;

            console.log(data);
            
            if (mts_status_message) {
              if(mts_status_message==1){
                data = data.filter(function(item) {
                    return item.mts_is_skipped === mts_status_message;
                });
              }
              else if (mts_status_message === "NOT_SCHEDULED") {
                    data = data.filter(function(item) {
                        return item.mts_status_message === null;
                    });
                }
              else{
                  data = data.filter(function(item) {
                      return item.mts_status_message === mts_status_message;
                  });
              }
               
            }
            if (startDate && endDate) {
    data = data.filter(function(item) {
        // Convert formatted date strings to Date objects for comparison
        var itemDate = new Date(item.formatted_date);
        var start = new Date(startDate);
        var end = new Date(endDate);
        // Check if item date is between start and end date
        return itemDate >= start && itemDate <= end;
    });
}
            for (var i = 0; i < data.length; i++) {
                // var x = i + 1;
                var x=serialNumber++;
                var totalAmount = (data[i].amount !== null) ? data[i].amount : "00";
                
                html += '<tr>' +
                    '<td class="contact   fw-semi-bold py-2 px-3">' + x + '</td>';

                if (data[i].is_active == 1 && data[i].is_deleted == 0) {
                    html += '<td class="contact   white-space-nowrap py-2 px-3">' + data[i].customer_name + '</td>';
                } else {
                    html += '<td class="contact   white-space-nowrap py-2 px-3 text-decoration-line-through">' + data[i].customer_name + '</td>';
                }

                

                html += '<td class="contact   fw-semi-bold py-2 px-3">' + data[i].customer_mobile_no + '</td>' ;


                if( data[i].bank_account_no){


                 html +='<td class="contact  fw-semi-bold py-2 px-3">' + data[i].bank_account_no + '</td>' ;

                 }
                 else{
                  html +='<td class="contact  fw-semi-bold py-2 px-3"></td>' ;
                 
                 }

                     html +='<td class="contact   fw-semi-bold py-2 px-3">' + data[i].amount + '</td>' ;
                                        if (data[i].formatted_date) {
                        var formattedDate = new Date(data[i].formatted_date);
                        var day = formattedDate.getDate();
                        var month = formattedDate.getMonth() + 1;
                        var year = formattedDate.getFullYear();

                        // Pad single digit day and month with leading zeros
                        day = day < 10 ? '0' + day : day;
                        month = month < 10 ? '0' + month : month;

                        // Concatenate day, month, and year in dd/mm/yyyy format
                        var formattedDateString = day + '/' + month + '/' + year;

                        // Append formatted date to HTML
                        html += '<td class="contact fw-semi-bold py-2 px-3">' + formattedDateString + '</td>';
                    } else {
                        // Handle the case where 'formatted_date' property is undefined
                        html += '<td class="contact fw-semi-bold py-2 px-3">-</td>';
                    }

                    // '<td class="contact  fw-semi-bold py-2 px-3">' + data[i].formatted_date + '</td>' +
                    html +=  '<td class="contact   fw-semi-bold py-2 px-3">' + data[i].branch_name + '</td>';

                    if(data[i].loan_type_name){
                        html+='<td class="contact   fw-semi-bold py-2 px-3">' + data[i].loan_type_name + '</td>' ;
                    }
                    else{
                        html+='<td class="contact   fw-semi-bold py-2 px-3"></td>' ;

                    }

                     html+='<td class="contact   fw-semi-bold py-2 px-3">' + data[i].firstname+' '+data[i].lastname + '</td>' ;
             

                    if(data[i].mts_is_skipped=="0"){

                        var color="";

                        if(data[i].mts_status_message=="I"){
                          html+='<td class="align-middle ps-3 amount"><span class="badge badge-phoenix badge-phoenix-info">Initiated</span></td>';
                        }
                        else if(data[i].mts_status_message=="S"){
                          html+='<td class="align-middle ps-3 amount"><span class="badge badge-phoenix badge-phoenix-success">Success</span></td>';
                        }
                        else if(data[i].mts_status_message=="f"){
                          html+='<td class="align-middle ps-3 amount"><span class="badge badge-phoenix badge-phoenix-danger">Failure</span></td>';
                        }               
                        else{
                          html+='<td class="align-middle ps-3 amount"><span class="badge badge-phoenix badge-phoenix-primary">Not Scheduled</span></td>';
                        }
                  }
                
                  else{
                  html+='<td class="align-middle ps-3 amount"><span class="badge badge-phoenix badge-phoenix-warning">Skipped</span></td>';
                  }
                    '</tr>';
            }

            

            $('#EmployeeWiselead').html(html);
            
             $('#totalempwise').html(response.total_rows);
            //  display_paginationempwise(data.length, page);

          display_paginationempwise(response.total_rows, page);
          exportToExcel();
        },
        error: function (response) {
            console.log("error");
            $('#EmployeeWiselead').html("No Data Found");  
            $('#totalempwise').html(0);
            display_paginationempwise(1, page);
    }
    });
    
}

function display_paginationempwise(totalRows, currentPage) {
        var itemsPerPage = 10; // Assuming 10 records per page
        var totalPages = Math.ceil(totalRows / itemsPerPage);
        var maxButtonsToShow = 5; // Set the maximum number of buttons to show

        var pagination = '<ul class="pagination justify-content-center">';

       // First button
        pagination += '<li class="page-item ' + (currentPage === 1 ? 'disabled' : '') + '">';
        pagination += '<button class="page-link" onclick="showEmployeeWiseleads(1)" aria-label="First">';
        pagination += '<span aria-hidden="true">&laquo;&laquo;</span></button></li>';

        // Previous button
        pagination += '<li class="page-item ' + (currentPage === 1 ? 'disabled' : '') + '">';
        pagination += '<button class="page-link" data-list-pagination="prev" onclick="showEmployeeWiseleads(' + (currentPage - 1) + ')" aria-label="Previous">';
        pagination += '<span aria-hidden="true">&laquo;</span></button></li>';

        // Page buttons
        var startPage = Math.max(1, currentPage - Math.floor(maxButtonsToShow / 2));
        var endPage = Math.min(totalPages, startPage + maxButtonsToShow - 1);

        for (var i = startPage; i <= endPage; i++) {
            pagination += '<li class="page-item ' + (i === currentPage ? 'active' : '') + '">';
            pagination += '<button class="page-link" onclick="showEmployeeWiseleads(' + i + ')">' + i + '</button></li>';
        }

        // Next button
        pagination += '<li class="page-item ' + (currentPage === totalPages ? 'disabled' : '') + '">';
        pagination += '<button class="page-link" data-list-pagination="next" onclick="showEmployeeWiseleads(' + (currentPage + 1) + ')" aria-label="Next">';
        pagination += '<span aria-hidden="true">&raquo;</span></button></li>';

           // Last button
        pagination += '<li class="page-item ' + (currentPage === totalPages ? 'disabled' : '') + '">';
        pagination += '<button class="page-link" onclick="showEmployeeWiseleads(' + totalPages + ')" aria-label="Last">';
        pagination += '<span aria-hidden="true">&raquo;&raquo;</span></button></li>';


        pagination += '</ul>';

        $('#paginationemp').html(pagination);
    }




    
   function exportToExcelx() {
    // alert("vikas");
  var table = document.getElementById('reporttableexcel');
  var sheetData = XLSX.utils.table_to_sheet(table);
  var wb = XLSX.utils.book_new();
  XLSX.utils.book_append_sheet(wb, sheetData, 'Sheet1');

  // Convert the workbook to a data URL
  var dataURL = XLSX.write(wb, { bookType: 'xlsx', type: 'base64' });

  // Create a download link and trigger the download
  var link = document.createElement('a');
  link.href = 'data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,' + dataURL;
  link.download = 'exported_data.xlsx';
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
}

function exportToExcel() {
    // alert("vikas kamankar")
  var customer_name = $('#customer_name').val();
  var customer_mobile_no = $('#customer_mobile_no').val();
  var amount = $('#amount').val();
  var formatted_date = $('#formatted_date').val();
  var branch_name = $('#branch_name').val();
  var loan_type_name = $('#loan_type_name').val();
  var firstname = $('#firstname').val();
  var lastname = $('#lastname').val();
  var mts_status_message = $('#mts_status_message').val();
   // alert(leadInterestTypeId);
  $.ajax({
    type: 'GET',
    url: "<?php echo base_url()?>api/Dashboard/showMandateList/",
    data: {
      customer_name: customer_name,
      customer_mobile_no: customer_mobile_no,
      // middlename: middlename,
      amount: amount,
      formatted_date: formatted_date,
      branch_name: branch_name,
      loan_type_name: loan_type_name,
      firstname: firstname,
      lastname: lastname,
      mts_status_message: mts_status_message,

    },
    dataType: 'json',
        beforeSend: function(xhr) {
          xhr.setRequestHeader('X-API-KEY', 'enachSyncWorks');
        },

    success: function (response) {
      var data = response.data;
      // var serialNumber = (page - 1) * 10 + 1;

      // exportDataToExcel(data);
      var html="";
                    var tbt="";
                    var i ="";

                    for (var i = 0; i < data.length; i++) {
                var x = i + 1;
                // var x=serialNumber++;
                var totalAmount = (data[i].amount !== null) ? data[i].amount : "00";
                html += '<tr>' +
                    '<td class="contact   fw-semi-bold py-2 px-3">' + x + '</td>';

                if (data[i].is_active == 1 && data[i].is_deleted == 0) {
                    html += '<td class="contact   white-space-nowrap py-2 px-3">' + data[i].customer_name + '</td>';
                } else {
                    html += '<td class="contact   white-space-nowrap py-2 px-3 text-decoration-line-through">' + data[i].customer_name + '</td>';
                }

                

                html += '<td class="contact   fw-semi-bold py-2 px-3">' + data[i].customer_mobile_no + '</td>' +
                '<td class="contact  fw-semi-bold py-2 px-3">' + data[i].bank_account_no + '</td>' +

                    '<td class="contact   fw-semi-bold py-2 px-3">' + data[i].amount + '</td>' +
                    '<td class="contact  fw-semi-bold py-2 px-3">' + data[i].formatted_date + '</td>' +
                    '<td class="contact   fw-semi-bold py-2 px-3">' + data[i].branch_name + '</td>' +
                    '<td class="contact   fw-semi-bold py-2 px-3">' + data[i].loan_type_name + '</td>' +
                     '<td class="contact   fw-semi-bold py-2 px-3">' + data[i].firstname+' '+data[i].lastname + '</td>' ;

                    if(data[i].mts_is_skipped=="0"){

                  var color="";

                  if(data[i].mts_status_message=="I"){
                    html+='<td class="align-middle ps-3 amount"><span class="badge badge-phoenix badge-phoenix-info">Initiated</span></td>';
                  }
                  else if(data[i].mts_status_message=="S"){
                    html+='<td class="align-middle ps-3 amount"><span class="badge badge-phoenix badge-phoenix-success">Success</span></td>';
                  }
                  else if(data[i].mts_status_message=="F"){
                    html+='<td class="align-middle ps-3 amount"><span class="badge badge-phoenix badge-phoenix-danger">Failure</span></td>';
                  }
                  else{
                    html+='<td class="align-middle ps-3 amount"><span class="badge badge-phoenix badge-phoenix-primary">Not Scheduled</span></td>';
                  }
                  }

                  else{
                  html+='<td class="align-middle ps-3 amount"><span class="badge badge-phoenix badge-phoenix-warning">Skipped</span></td>';
                  }
                    '</tr>';
            }
                    $('#showReportResultexcel').html(html);


    },
    error: function (error) {
      // console.error('Error fetching data:', error);
      // alert(' error ');
    }
  });
}
    </script>